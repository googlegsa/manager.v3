#summary A Command Line Utility to Encrypt Passwords
#labels Phase-Deploy,Phase-Support,Phase-Implementation

== A Command Line Utility to Encrypt Passwords ==

Passwords stored in the Connector Manager's `applicationContext.properties` file and Connector's `connectorName.properties` file are stored in an encrypted fashion.  The Connector Manager decrypts these passwords when it loads the properties file.   The stored passwords are typically credentials needed by the Connector to gain access to Repositories, Databases, File shares, etc.

The passwords are typically encrypted automatically when supplied as input to the GSA Administrator Console.  However there may be instances during Connector development, Connector installation, or system integration when an encrypted password may need to be generated when the Connector Manager or GSA is not running.

A new !EncryptPassword command line utility built into the Connector Manager allows an administrator to generate encrypted passwords. 

== Details ==

The !EncryptPassword utility is built into the Connector Manager's connector.jar file and is run by executing the `connector.jar` file using the `java -jar` command, supplying !EncryptPassword as it's first argument.

The !EncryptPassword utility needs access to the Connector Manager's keystore configuration.  For that reason, the command *must* be run from the installed Connector Manager's web application directory^*^, where it can extract the keystore configuration from the the `WEB-INF/web.xml` file located there.

Like the Connector Manager proper, this command requires Java 1.5 or Java 6 to execute.  When run, !EncryptPassword prompts for a password to be entered, asks for it a second time to ensure it was correctly entered, then prints the encrypted password to the output.

Here is an example !EncryptPassword execution:

{{{
% cd /path/to/connector/installation/Tomcat/webapps/connector-manager
% java -jar WEB-INF/lib/connector.jar EncryptPassword
EncryptPassword v2.6.0 (build 2506MP  June 11 2010)

  Type Password: ******
Retype Password: ******

The encrypted password is:
ohFzzOHRJ/ByZSG0QMn04g==
}}}

Note that the entered passwords are not echoed to the console.  Given the encrypted password, the administrator may then manually add the password property to the appropriate properties file.  Note that the property name *must* include the substring 'password', or the property value will not be correctly decrypted when read.

Excerpt from a `.properties` file:

{{{
jdbc.datasource.user=...
jdbc.datasource.password=ohFzzOHRJ/ByZSG0QMn04g==
}}}


== Usage ==

{{{
usage: EncryptPassword [-?] [-v] [-p password]
       -?, --help      Display this help.
       -v, --version   Display version.
       -p, --password  Encrypt the supplied password.
}}}

----
New in Connector Manager v2.6.0

^*^ *Note* In Connector Manager v2.6.0, the command must execute from the Connector Manager `WEB-INF` directory.  In all later versions, it must execute from its parent directory.